<!doctype html><html lang=es dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Contenedores: Desde el kernel hasta la orquestación - runc y containerd | Javi Vela Blog</title><meta name=keywords content="containers,kubernetes,K8S,linux"><meta name=description content="De los namespaces y cgroups del kernel a la orquestación: entendiendo cómo runc ejecuta contenedores con el estándar OCI y containerd gestiona su ciclo de vida en el ecosistema moderno."><meta name=author content="Javi Vela"><link rel=canonical href=https://blog.javivela.dev/posts/2025/k8s/contenedores-desde-el-kernel-hasta-la-orquestacion-parte-2-runc-containerd/><meta name=google-site-verification content="Z9k5TW79n5H64zWLwEcNkbNITNDDepKoE2udZjirxXM"><meta name=msvalidate.01 content="6A293DF736526A40A24D911811A73F7D"><link crossorigin=anonymous href=/assets/css/stylesheet.8fe10233a706bc87f2e08b3cf97b8bd4c0a80f10675a143675d59212121037c0.css integrity="sha256-j+ECM6cGvIfy4Is8+XuL1MCoDxBnWhQ2ddWSEhIQN8A=" rel="preload stylesheet" as=style><link rel=icon href=https://blog.javivela.dev/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://blog.javivela.dev/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://blog.javivela.dev/favicon-32x32.png><link rel=apple-touch-icon href=https://blog.javivela.dev/apple-touch-icon.png><link rel=mask-icon href=https://blog.javivela.dev/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=es href=https://blog.javivela.dev/posts/2025/k8s/contenedores-desde-el-kernel-hasta-la-orquestacion-parte-2-runc-containerd/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="https://blog.javivela.dev/posts/2025/k8s/contenedores-desde-el-kernel-hasta-la-orquestacion-parte-2-runc-containerd/"><meta property="og:site_name" content="Javi Vela Blog"><meta property="og:title" content="Contenedores: Desde el kernel hasta la orquestación - runc y containerd"><meta property="og:description" content="De los namespaces y cgroups del kernel a la orquestación: entendiendo cómo runc ejecuta contenedores con el estándar OCI y containerd gestiona su ciclo de vida en el ecosistema moderno."><meta property="og:locale" content="es"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-07-07T00:00:00+00:00"><meta property="article:modified_time" content="2025-07-07T00:00:00+00:00"><meta property="article:tag" content="Containers"><meta property="article:tag" content="Kubernetes"><meta property="article:tag" content="K8S"><meta property="article:tag" content="Linux"><meta property="og:image" content="https://blog.javivela.dev/papermod-cover.png"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://blog.javivela.dev/papermod-cover.png"><meta name=twitter:title content="Contenedores: Desde el kernel hasta la orquestación - runc y containerd"><meta name=twitter:description content="De los namespaces y cgroups del kernel a la orquestación: entendiendo cómo runc ejecuta contenedores con el estándar OCI y containerd gestiona su ciclo de vida en el ecosistema moderno."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://blog.javivela.dev/posts/"},{"@type":"ListItem","position":2,"name":"Contenedores: Desde el kernel hasta la orquestación - runc y containerd","item":"https://blog.javivela.dev/posts/2025/k8s/contenedores-desde-el-kernel-hasta-la-orquestacion-parte-2-runc-containerd/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Contenedores: Desde el kernel hasta la orquestación - runc y containerd","name":"Contenedores: Desde el kernel hasta la orquestación - runc y containerd","description":"De los namespaces y cgroups del kernel a la orquestación: entendiendo cómo runc ejecuta contenedores con el estándar OCI y containerd gestiona su ciclo de vida en el ecosistema moderno.","keywords":["containers","kubernetes","K8S","linux"],"articleBody":"Introducción Continuamos con la segunda parte de “Desde el kernel hasta la orquestación”, en este artículo vamos a hablar sobre runc y containerd.\nEn el post Contenedores: Desde el kernel hasta la orquestación - namespaces y control groups (cgroups) vimos los pilares fundamentales sobre los que se ejecutan los contenedores: namespaces y cgroups del kernel de Linux.\nEstas funcionalidades del sistema operativo permiten el aislamiento de procesos y el control de los recursos utilizados; trabajar con estas tecnologías requiere un conocimiento del kernel y de los comandos de bajo nivel.\nrunc y containerd son dos herramientas que actúan como interfaces entre las herramientas de alto nivel y los comandos de bajo nivel, simplificando enormemente el trabajo con contenedores.\nAl comienzo, Docker integraba toda la funcionalidad en una aplicación monolítica: gestión de imágenes, networking, almacenamiento, ejecución de contenedores… Esta arquitectura presentaba grandes problemas de dependencia, evolución y control por una única empresa.\nEn 2015 nació la Open Container Initiative (OCI), su objetivo principal es crear un estándar para el manejo y ejecución de contenedores que hasta el momento estaba dominado por Docker. De esta manera se garantizaba la interoperabilidad entre los diferentes proveedores y permitió crear estándares abiertos para los runtimes de contenedores y el formato de las imágenes, permitiendo así una arquitectura modular y flexible.\nLas especificaciones más importantes son las siguientes:\nDistribution Spec (cómo distribuir las imágenes): Define la API REST estándar para la distribución y almacenamiento de imágenes de contenedor, incluyendo operaciones como el envío (push) y la descarga (pull) de imágenes. Esto asegura la interoperabilidad entre diferentes herramientas y registros de imágenes compatibles con OCI. Image Spec (formato de las imágenes): Define el formato de la estructura, almacenamiento y referencia de una imagen, garantizando que la imagen creada pueda ser ejecutada por cualquier runtime que cumpla estándar OCI. Runtime Spec (cómo ejecutar las imágenes): Define la interfaz entre el runtime de bajo nivel y las herramientas de alto nivel, de esta manera podemos intercambiar el uso de herramientas como containerd o CRI-O sin realizar ninguna modificación. runc y containerd hacen que trabajar con contenedores sea más sencillo, también son la clave para sistemas de orquestación de contenedores como Kubernetes, que pueden utilizar interfaces estándar sin la necesidad de saber los detalles de la implementación del sistema operativo y de las herramientas utilizadas.\nAmbas herramientas eran parte de Docker, fueron extraídas y donadas a la CNCF (Cloud Native Computing Foundation).\nrunc Es una herramienta de línea de comandos escrita en Go que solo puede ejecutarse en Linux. Permite ejecutar aplicaciones contenerizadas siguiendo el estándar definido por la Open Container Initiative (OCI).\nAunque proporciona un mayor nivel de abstracción respecto a los comandos del kernel, sigue siendo una utilidad de bajo nivel y normalmente es utilizada por herramientas de más alto nivel.\nEl estándar definido para la ejecución de contenedores se basa en el concepto de bundle, que consiste en un directorio que contiene un archivo config.json y un directorio rootfs (root filesystem) con el sistema de archivos del contenedor.\nEl archivo config.json define cómo debe ejecutarse el contenedor. Algunos parámetros que proporciona son los siguientes:\nprocess: Define qué comando ejecutar, el usuario, las variables de entorno y las capacidades. root: Especifica la ruta al sistema de archivos raíz. mounts: Lista los puntos de montaje necesarios. linux.namespaces: Configura el aislamiento mediante namespaces. linux.resources: Establece límites de recursos. Esta estructura JSON permite que herramientas de alto nivel generen configuraciones complejas.\n{ \"ociVersion\": \"1.2.1\", \"process\": { \"terminal\": true, \"user\": { \"uid\": 0, \"gid\": 0 }, \"args\": [\"sh\"], \"env\": [ \"PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\", \"TERM=xterm\" ], \"cwd\": \"/\", \"capabilities\": { \"bounding\": [\"CAP_AUDIT_WRITE\", \"CAP_KILL\", \"CAP_NET_BIND_SERVICE\"], \"effective\": [\"CAP_AUDIT_WRITE\", \"CAP_KILL\", \"CAP_NET_BIND_SERVICE\"], \"permitted\": [\"CAP_AUDIT_WRITE\", \"CAP_KILL\", \"CAP_NET_BIND_SERVICE\"] }, \"rlimits\": [ { \"type\": \"RLIMIT_NOFILE\", \"hard\": 1024, \"soft\": 1024 } ], \"noNewPrivileges\": true }, \"root\": { \"path\": \"rootfs\", \"readonly\": true }, \"hostname\": \"runc\", \"mounts\": [ { \"destination\": \"/proc\", \"type\": \"proc\", \"source\": \"proc\" }, { \"destination\": \"/dev\", \"type\": \"tmpfs\", \"source\": \"tmpfs\", \"options\": [\"nosuid\", \"strictatime\", \"mode=755\", \"size=65536k\"] }, { \"destination\": \"/dev/pts\", \"type\": \"devpts\", \"source\": \"devpts\", \"options\": [ \"nosuid\", \"noexec\", \"newinstance\", \"ptmxmode=0666\", \"mode=0620\", \"gid=5\" ] }, { \"destination\": \"/dev/shm\", \"type\": \"tmpfs\", \"source\": \"shm\", \"options\": [\"nosuid\", \"noexec\", \"nodev\", \"mode=1777\", \"size=65536k\"] }, { \"destination\": \"/dev/mqueue\", \"type\": \"mqueue\", \"source\": \"mqueue\", \"options\": [\"nosuid\", \"noexec\", \"nodev\"] }, { \"destination\": \"/sys\", \"type\": \"sysfs\", \"source\": \"sysfs\", \"options\": [\"nosuid\", \"noexec\", \"nodev\", \"ro\"] }, { \"destination\": \"/sys/fs/cgroup\", \"type\": \"cgroup\", \"source\": \"cgroup\", \"options\": [\"nosuid\", \"noexec\", \"nodev\", \"relatime\", \"ro\"] } ], \"linux\": { \"resources\": { \"devices\": [ { \"allow\": false, \"access\": \"rwm\" } ] }, \"namespaces\": [ { \"type\": \"pid\" }, { \"type\": \"network\" }, { \"type\": \"ipc\" }, { \"type\": \"uts\" }, { \"type\": \"mount\" }, { \"type\": \"cgroup\" } ], \"maskedPaths\": [ \"/proc/acpi\", \"/proc/asound\", \"/proc/kcore\", \"/proc/keys\", \"/proc/latency_stats\", \"/proc/timer_list\", \"/proc/timer_stats\", \"/proc/sched_debug\", \"/sys/firmware\", \"/proc/scsi\" ], \"readonlyPaths\": [ \"/proc/bus\", \"/proc/fs\", \"/proc/irq\", \"/proc/sys\", \"/proc/sysrq-trigger\" ] } } Algunos de los comandos que define el estándar OCI y que runc implementa son:\nevents: muestra eventos del contenedor como notificaciones OOM, estadísticas de uso de CPU, memoria e IO. create: ejecuta el proceso definido por el usuario en un contenedor creado. delete: elimina los recursos asociados al contenedor, utilizado frecuentemente con contenedores en modo desacoplado. kill: envía la señal especificada (por defecto: SIGTERM) al proceso principal del contenedor. start: inicia el proceso principal. state: obtiene el estado actual de un contenedor. rootfs (root filesystem) es el sistema de archivos raíz del contenedor. Contiene todos los archivos, librerías y herramientas para que el contenedor pueda ejecutarse.\nUna estructura típica del sistema de archivos sería:\nrootfs/ ├── bin/ # Binarios esenciales (sh, ls, cat, etc.) ├── boot/ # Archivos de arranque (generalmente vacío) ├── dev/ # Dispositivos (se monta dinámicamente) ├── etc/ # Configuraciones del sistema │ ├── passwd # Usuarios del contenedor │ ├── group # Grupos del contenedor │ ├── hosts # Resolución local de nombres │ └── resolv.conf # Configuración DNS ├── home/ # Directorios de usuarios ├── lib/ # Bibliotecas compartidas esenciales ├── lib64/ # Bibliotecas de 64 bits ├── media/ # Puntos de montaje para medios removibles ├── mnt/ # Puntos de montaje temporales ├── opt/ # Paquetes de software opcionales ├── proc/ # Sistema de archivos virtual (se monta dinámicamente) ├── root/ # Directorio home del usuario root ├── run/ # Datos de runtime ├── sbin/ # Binarios del sistema ├── srv/ # Datos de servicios ├── sys/ # Sistema de archivos virtual (se monta dinámicamente) ├── tmp/ # Archivos temporales ├── usr/ # Programas y datos de usuario │ ├── bin/ # Binarios de usuario │ ├── lib/ # Bibliotecas │ ├── local/ # Software local │ └── share/ # Datos compartidos └── var/ # Datos variables ├── log/ # Logs del sistema ├── cache/ # Cache de aplicaciones └── tmp/ # Archivos temporales adicionales Sistema de archivos de la imagen Alpine:\nrootfs/ ├── bin -\u003e /usr/bin ├── etc/ │ ├── alpine-release │ ├── passwd │ └── group ├── lib -\u003e /usr/lib ├── sbin -\u003e /usr/sbin ├── usr/ │ ├── bin/ │ │ ├── sh -\u003e /bin/busybox │ │ ├── ls -\u003e /bin/busybox │ │ └── cat -\u003e /bin/busybox │ └── lib/ │ └── libc.musl-x86_64.so.1 └── var/ Sistema de archivos de la imagen Ubuntu:\nrootfs/ ├── bin/ │ ├── bash │ ├── sh -\u003e dash │ └── ls ├── usr/ │ ├── bin/ │ │ ├── python3 │ │ └── apt │ └── lib/ │ └── x86_64-linux-gnu/ └── lib/ └── x86_64-linux-gnu/ ├── libc.so.6 └── libdl.so.2 containerd Es un servicio que gestiona el ciclo de vida de los contenedores, implementando los estándares definidos por la OCI.\nActúa como la capa de abstracción entre los orquestadores de contenedores, como Kubernetes, y los runtimes de bajo nivel, como runc.\nLas funcionalidades principales de containerd son:\nImage service: Gestiona la descarga, almacenamiento y distribución de imágenes. Pull/Push: Descarga y subida de imágenes desde/hacia registries Gestión de capas: Manejo eficiente de layers con deduplicación Verificación de la integridad de las capas. Recolección de basura (garbage collection). Runtime service: Gestiona la ejecución de contenedores. Snapshot service: Gestiona los sistemas de archivos (filesystem) de los contenedores. Podemos interactuar con el servicio utilizando diferentes herramientas:\nctr: Cliente oficial de bajo nivel para containerd. Permite gestionar imágenes, snapshots y contenedores, principalmente para tareas administrativas y de depuración. nerdctl: Interfaz de línea de comandos compatible con Docker, diseñada para usuarios que buscan una experiencia similar a Docker pero utilizando containerd como backend. crictl: Herramienta de línea de comandos para interactuar con runtimes compatibles con el estándar CRI (Container Runtime Interface), utilizada principalmente en entornos Kubernetes para inspeccionar y gestionar contenedores. La configuración del servicio containerd se realiza a través del archivo /etc/containerd/config.toml. Este archivo permite ajustar parámetros clave del servicio, como rutas de almacenamiento, plugins habilitados, configuración de red (CNI), integración con runtimes como runc, y opciones de seguridad.\nUn ejemplo de configuración podría ser:\nversion = 3 root = '/var/lib/containerd' state = '/run/containerd' temp = '' disabled_plugins = [] required_plugins = [] oom_score = 0 imports = [] [grpc] address = '/run/containerd/containerd.sock' tcp_address = '' tcp_tls_ca = '' tcp_tls_cert = '' tcp_tls_key = '' uid = 0 gid = 0 max_recv_message_size = 16777216 max_send_message_size = 16777216 [ttrpc] address = '' uid = 0 gid = 0 [debug] address = '' uid = 0 gid = 0 level = '' format = '' [metrics] address = '' grpc_histogram = false [plugins] [plugins.'io.containerd.cri.v1.images'] snapshotter = 'overlayfs' disable_snapshot_annotations = true discard_unpacked_layers = false max_concurrent_downloads = 3 concurrent_layer_fetch_buffer = 0 image_pull_progress_timeout = '5m0s' image_pull_with_sync_fs = false stats_collect_period = 10 use_local_image_pull = false [plugins.'io.containerd.cri.v1.images'.pinned_images] sandbox = 'registry.k8s.io/pause:3.10' [plugins.'io.containerd.cri.v1.images'.registry] config_path = '' [plugins.'io.containerd.cri.v1.images'.image_decryption] key_model = 'node' [plugins.'io.containerd.cri.v1.runtime'] enable_selinux = false selinux_category_range = 1024 max_container_log_line_size = 16384 disable_apparmor = false restrict_oom_score_adj = false disable_proc_mount = false unset_seccomp_profile = '' tolerate_missing_hugetlb_controller = true disable_hugetlb_controller = true device_ownership_from_security_context = false ignore_image_defined_volumes = false netns_mounts_under_state_dir = false enable_unprivileged_ports = true enable_unprivileged_icmp = true enable_cdi = true cdi_spec_dirs = ['/etc/cdi', '/var/run/cdi'] drain_exec_sync_io_timeout = '0s' ignore_deprecation_warnings = [] [plugins.'io.containerd.cri.v1.runtime'.containerd] default_runtime_name = 'runc' ignore_blockio_not_enabled_errors = false ignore_rdt_not_enabled_errors = false [plugins.'io.containerd.cri.v1.runtime'.containerd.runtimes] [plugins.'io.containerd.cri.v1.runtime'.containerd.runtimes.runc] runtime_type = 'io.containerd.runc.v2' runtime_path = '' pod_annotations = [] container_annotations = [] privileged_without_host_devices = false privileged_without_host_devices_all_devices_allowed = false cgroup_writable = false base_runtime_spec = '' cni_conf_dir = '' cni_max_conf_num = 0 snapshotter = '' sandboxer = 'podsandbox' io_type = '' [plugins.'io.containerd.cri.v1.runtime'.containerd.runtimes.runc.options] BinaryName = '' CriuImagePath = '' CriuWorkPath = '' IoGid = 0 IoUid = 0 NoNewKeyring = false Root = '' ShimCgroup = '' [plugins.'io.containerd.cri.v1.runtime'.cni] bin_dir = '' bin_dirs = ['/opt/cni/bin'] conf_dir = '/etc/cni/net.d' max_conf_num = 1 setup_serially = false conf_template = '' ip_pref = '' use_internal_loopback = false [plugins.'io.containerd.differ.v1.erofs'] mkfs_options = [] [plugins.'io.containerd.gc.v1.scheduler'] pause_threshold = 0.02 deletion_threshold = 0 mutation_threshold = 100 schedule_delay = '0s' startup_delay = '100ms' [plugins.'io.containerd.grpc.v1.cri'] disable_tcp_service = true stream_server_address = '127.0.0.1' stream_server_port = '0' stream_idle_timeout = '4h0m0s' enable_tls_streaming = false [plugins.'io.containerd.grpc.v1.cri'.x509_key_pair_streaming] tls_cert_file = '' tls_key_file = '' [plugins.'io.containerd.image-verifier.v1.bindir'] bin_dir = '/opt/containerd/image-verifier/bin' max_verifiers = 10 per_verifier_timeout = '10s' [plugins.'io.containerd.internal.v1.opt'] path = '/opt/containerd' [plugins.'io.containerd.internal.v1.tracing'] [plugins.'io.containerd.metadata.v1.bolt'] content_sharing_policy = 'shared' no_sync = false [plugins.'io.containerd.monitor.container.v1.restart'] interval = '10s' [plugins.'io.containerd.monitor.task.v1.cgroups'] no_prometheus = false [plugins.'io.containerd.nri.v1.nri'] disable = false socket_path = '/var/run/nri/nri.sock' plugin_path = '/opt/nri/plugins' plugin_config_path = '/etc/nri/conf.d' plugin_registration_timeout = '5s' plugin_request_timeout = '2s' disable_connections = false [plugins.'io.containerd.runtime.v2.task'] platforms = ['linux/arm64/v8'] [plugins.'io.containerd.service.v1.diff-service'] default = ['walking'] sync_fs = false [plugins.'io.containerd.service.v1.tasks-service'] blockio_config_file = '' rdt_config_file = '' [plugins.'io.containerd.shim.v1.manager'] env = [] [plugins.'io.containerd.snapshotter.v1.blockfile'] root_path = '' scratch_file = '' fs_type = '' mount_options = [] recreate_scratch = false [plugins.'io.containerd.snapshotter.v1.devmapper'] root_path = '' pool_name = '' base_image_size = '' async_remove = false discard_blocks = false fs_type = '' fs_options = '' [plugins.'io.containerd.snapshotter.v1.erofs'] root_path = '' ovl_mount_options = [] enable_fsverity = false [plugins.'io.containerd.snapshotter.v1.native'] root_path = '' [plugins.'io.containerd.snapshotter.v1.overlayfs'] root_path = '' upperdir_label = false sync_remove = false slow_chown = false mount_options = [] [plugins.'io.containerd.snapshotter.v1.zfs'] root_path = '' [plugins.'io.containerd.tracing.processor.v1.otlp'] [plugins.'io.containerd.transfer.v1.local'] max_concurrent_downloads = 3 concurrent_layer_fetch_buffer = 0 max_concurrent_uploaded_layers = 3 check_platform_supported = false config_path = '' [cgroup] path = '' [timeouts] 'io.containerd.timeout.bolt.open' = '0s' 'io.containerd.timeout.cri.defercleanup' = '1m0s' 'io.containerd.timeout.metrics.shimstats' = '2s' 'io.containerd.timeout.shim.cleanup' = '5s' 'io.containerd.timeout.shim.load' = '5s' 'io.containerd.timeout.shim.shutdown' = '3s' 'io.containerd.timeout.task.state' = '2s' [stream_processors] [stream_processors.'io.containerd.ocicrypt.decoder.v1.tar'] accepts = ['application/vnd.oci.image.layer.v1.tar+encrypted'] returns = 'application/vnd.oci.image.layer.v1.tar' path = 'ctd-decoder' args = ['--decryption-keys-path', '/etc/containerd/ocicrypt/keys'] env = ['OCICRYPT_KEYPROVIDER_CONFIG=/etc/containerd/ocicrypt/ocicrypt_keyprovider.conf'] [stream_processors.'io.containerd.ocicrypt.decoder.v1.tar.gzip'] accepts = ['application/vnd.oci.image.layer.v1.tar+gzip+encrypted'] returns = 'application/vnd.oci.image.layer.v1.tar+gzip' path = 'ctd-decoder' args = ['--decryption-keys-path', '/etc/containerd/ocicrypt/keys'] env = ['OCICRYPT_KEYPROVIDER_CONFIG=/etc/containerd/ocicrypt/ocicrypt_keyprovider.conf'] En configuraciones avanzadas, se pueden definir múltiples runtimes, ajustar el driver de almacenamiento (por ejemplo, overlayfs), configurar la comunicación por sockets, y personalizar la integración con Kubernetes mediante CRI.\nAlgunos puntos destacados de la configuración:\nGeneral: Define rutas de datos (root, state), plugins habilitados y parámetros globales. Comunicación y APIs: Configura los sockets para gRPC y ttrpc, utilizados para la comunicación entre procesos y con los shims. CRI (Container Runtime Interface): Permite la integración con Kubernetes, especificando imágenes sandbox, runtimes por defecto y opciones de red. Gestión de imágenes: Selección del snapshotter (por ejemplo, overlayfs), deduplicación de capas y políticas de recolección de basura. Red (CNI): Define rutas y parámetros para la configuración de red de los contenedores. Runtimes: Permite definir y personalizar diferentes runtimes (como runc), así como sus opciones específicas. La flexibilidad de este archivo permite adaptar containerd a distintos entornos y necesidades, desde laboratorios hasta despliegues en producción con Kubernetes.\nAdemás de containerd, existen otras alternativas para la ejecución de contenedores:\nCRI-O: Un runtime ligero diseñado específicamente para Kubernetes. Implementa la especificación Container Runtime Interface (CRI) y utiliza runc como runtime de bajo nivel. Docker Engine: Plataforma ampliamente utilizada para construir, enviar y ejecutar contenedores. Ofrece gestión de imágenes, redes y volúmenes, y emplea internamente containerd y runc. Mirantis Container Runtime: Solución empresarial previamente conocida como Docker Engine - Enterprise, certificada para entornos de producción y con características avanzadas de seguridad y soporte extendido. containerd-shim Para garantizar que los contenedores sigan funcionando incluso si el proceso principal de containerd se reinicia o actualiza, existe un componente intermedio llamado containerd-shim.\nEste shim se sitúa entre containerd y el runtime de bajo nivel (runc), y cumple varias funciones clave para ofrecer la gran resiliencia del sistema:\nPermite que los contenedores continúen ejecutándose de forma independiente al proceso principal de containerd. Gestiona la entrada y salida estándar (stdin, stdout, stderr) de los procesos dentro del contenedor. Se encarga de recolectar procesos huérfanos (zombies) para evitar fugas de recursos. Propaga señales del sistema operativo (como SIGTERM o SIGKILL) al proceso principal del contenedor. De este modo, cada contenedor tiene su propio proceso shim, lo que mejora la resiliencia y el aislamiento de los contenedores gestionados por containerd.\nEjemplo práctico Vamos a comprobar la evolución desde comandos del Kernel de Linux hasta las herramientas de alto nivel runc y containerd.\nsudo unshare --pid --mount --uts --fork /bin/bash mount -t proc proc /proc hostname manual-container ps aux El comando unshare permite crear nuevos namespaces en Linux, proporcionando una shell de bash que se ejecuta de forma aislada, puntos de montaje y hostname, aunque sigue teniendo acceso al sistema de archivos y procesos del host: --pid: crea un nuevo namespace de PID, donde los procesos tienen su propio espacio de identificadores, comenzando desde 1. --mount: aísla las operaciones de montaje, de modo que los cambios no afectan al host. --uts: crea un namespace UTS, permitiendo modificar el hostname y domainname solo dentro del namespace. --fork: ejecuta el proceso /bin/bash como hijo, haciendo que este sea el proceso principal del nuevo namespace. El comando mount -t proc proc /proc monta un sistema de archivos virtual proc en el nuevo namespace, mostrando solo los procesos del namespace. El comando hostname manual-container cambia el nombre del host dentro del namespace UTS recién creado, sin afectar al sistema principal. Vamos a utilizar el comando runc para obtener el mismo resultado:\nCONTAINER_NAME=manual-container mkdir $CONTAINER_NAME cd $CONTAINER_NAME sudo ctr image pull docker.io/library/alpine:3.22.0 mkdir rootfs sudo ctr image mount docker.io/library/alpine:3.22.0 rootfs runc spec echo $( jq '.process.args = [\"/bin/sh\", \"-c\", \"uname -a \u0026\u0026 ps aux \u0026\u0026 sleep 30\"]' config.json ) \u003e config.json sudo runc run $CONTAINER_NAME Creamos un directorio para alojar el sistema de archivos rootfs y la configuración del contenedor (config.json). Descargamos una imagen (por ejemplo, Alpine) para obtener el sistema de archivos base (rootfs). Generamos el archivo de configuración config.json con el comando runc spec. Modificamos el comando de inicio del contenedor para que ejecute uname -a \u0026\u0026 ps aux \u0026\u0026 sleep 30. Iniciamos el contenedor con sudo runc run $CONTAINER_NAME. Ejecutamos el contenedor utilizando containerd:\nsudo ctr images pull docker.io/library/alpine:3.22.0 sudo ctr run --rm docker.io/library/alpine:3.22.0 manual-container /bin/sh -c \"uname -a \u0026\u0026 ps aux \u0026\u0026 sleep 30\" Conclusión La orquestación y ejecución de contenedores no es una tarea trivial. Los namespaces y cgroups del kernel de Linux proporcionan el aislamiento y control de recursos a bajo nivel. Sobre estos cimientos, herramientas como runc y containerd añaden una capa de abstracción que facilita la gestión, mejora la experiencia de usuario y habilita funcionalidades avanzadas como la recolección de métricas.\nGracias a la estandarización impulsada por la comunidad y organizaciones como la OCI y la CNCF, hoy disponemos de un ecosistema diverso de herramientas (como gVisor, Kata Containers o CRI-O) que permiten adaptar la ejecución de contenedores a diferentes necesidades y escenarios, desde laboratorios hasta entornos de producción y orquestación con Kubernetes.\nCon estas bases sólidas, estamos preparados para el siguiente paso: Kubernetes.\nReferencias https://containerd.io/ https://github.com/containerd/containerd/blob/main/docs/PLUGINS.md https://github.com/opencontainers/containerd https://github.com/opencontainers/runc https://iximiuz.com/en/posts/you-dont-need-an-image-to-run-a-container/ https://kubernetes.io/docs/setup/production-environment/container-runtimes/ ","wordCount":"2829","inLanguage":"es","image":"https://blog.javivela.dev/papermod-cover.png","datePublished":"2025-07-07T00:00:00Z","dateModified":"2025-07-07T00:00:00Z","author":{"@type":"Person","name":"Javi Vela"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.javivela.dev/posts/2025/k8s/contenedores-desde-el-kernel-hasta-la-orquestacion-parte-2-runc-containerd/"},"publisher":{"@type":"Organization","name":"Javi Vela Blog","logo":{"@type":"ImageObject","url":"https://blog.javivela.dev/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://blog.javivela.dev/ accesskey=h title="Javi Vela Blog (Alt + H)">Javi Vela Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li><li><a href=https://blog.javivela.dev/en/ title=English aria-label=English>English</a></li></ul></div></div><ul id=menu><li><a href=https://blog.javivela.dev/posts/ title=Posts><span>Posts</span></a></li><li><a href=https://blog.javivela.dev/archives/ title=Archivos><span>Archivos</span></a></li><li><a href=https://blog.javivela.dev/search/ title=Buscar><span>Buscar</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://blog.javivela.dev/>Inicio</a>&nbsp;»&nbsp;<a href=https://blog.javivela.dev/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">Contenedores: Desde el kernel hasta la orquestación - runc y containerd</h1><div class=post-meta><span title='2025-07-07 00:00:00 +0000 UTC'>julio 7, 2025</span>&nbsp;·&nbsp;14 min&nbsp;·&nbsp;Javi Vela</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Tabla de Contenidos</span></summary><div class=inner><ul><li><a href=#introducci%c3%b3n aria-label=Introducción>Introducción</a></li><li><a href=#runc aria-label=runc>runc</a></li><li><a href=#containerd aria-label=containerd>containerd</a><ul><li><a href=#containerd-shim aria-label=containerd-shim>containerd-shim</a></li></ul></li><li><a href=#ejemplo-pr%c3%a1ctico aria-label="Ejemplo práctico">Ejemplo práctico</a></li><li><a href=#conclusi%c3%b3n aria-label=Conclusión>Conclusión</a></li><li><a href=#referencias aria-label=Referencias>Referencias</a></li></ul></div></details></div><div class=post-content><h2 id=introducción>Introducción<a hidden class=anchor aria-hidden=true href=#introducción>#</a></h2><p>Continuamos con la segunda parte de &ldquo;Desde el kernel hasta la orquestación&rdquo;, en este artículo vamos a hablar sobre <code>runc</code> y <code>containerd</code>.</p><p>En el post <a href=https://blog.javivela.dev/posts/2025/k8s/contenedores-desde-el-kernel-hasta-la-orquestacion-parte-1-cgroups-namespaces/>Contenedores: Desde el kernel hasta la orquestación - namespaces y control groups (cgroups)</a> vimos los pilares fundamentales sobre los que se ejecutan los contenedores: <a href=https://blog.javivela.dev/posts/2025/k8s/contenedores-desde-el-kernel-hasta-la-orquestacion-parte-1-cgroups-namespaces/#namespaces-linux>namespaces</a> y <a href=https://blog.javivela.dev/posts/2025/k8s/contenedores-desde-el-kernel-hasta-la-orquestacion-parte-1-cgroups-namespaces/#cgroups-control-groups>cgroups</a> del kernel de Linux.</p><p>Estas funcionalidades del sistema operativo permiten el aislamiento de procesos y el control de los recursos utilizados; trabajar con estas tecnologías requiere un conocimiento del kernel y de los comandos de bajo nivel.</p><p><code>runc</code> y <code>containerd</code> son dos herramientas que actúan como interfaces entre las herramientas de alto nivel y los comandos de bajo nivel, simplificando enormemente el trabajo con contenedores.</p><p>Al comienzo, <code>Docker</code> integraba toda la funcionalidad en una aplicación monolítica: gestión de imágenes, networking, almacenamiento, ejecución de contenedores&mldr; Esta arquitectura presentaba grandes problemas de dependencia, evolución y control por una única empresa.</p><p>En 2015 nació la <a href=https://opencontainers.org/>Open Container Initiative (OCI)</a>, su objetivo principal es crear un estándar para el manejo y ejecución de contenedores que hasta el momento estaba dominado por Docker. De esta manera se garantizaba la interoperabilidad entre los diferentes proveedores y permitió crear estándares abiertos para los runtimes de contenedores y el formato de las imágenes, permitiendo así una arquitectura modular y flexible.</p><p>Las especificaciones más importantes son las siguientes:</p><ul><li><a href=https://github.com/opencontainers/distribution-spec>Distribution Spec (cómo distribuir las imágenes)</a>: Define la API REST estándar para la distribución y almacenamiento de imágenes de contenedor, incluyendo operaciones como el envío (push) y la descarga (pull) de imágenes. Esto asegura la interoperabilidad entre diferentes herramientas y registros de imágenes compatibles con OCI.</li><li><a href=https://github.com/opencontainers/image-spec>Image Spec (formato de las imágenes)</a>: Define el formato de la estructura, almacenamiento y referencia de una imagen, garantizando que la imagen creada pueda ser ejecutada por cualquier runtime que cumpla estándar OCI.</li><li><a href=https://github.com/opencontainers/runtime-spec>Runtime Spec (cómo ejecutar las imágenes)</a>: Define la interfaz entre el runtime de bajo nivel y las herramientas de alto nivel, de esta manera podemos intercambiar el uso de herramientas como containerd o CRI-O sin realizar ninguna modificación.</li></ul><p><code>runc</code> y <code>containerd</code> hacen que trabajar con contenedores sea más sencillo, también son la clave para sistemas de orquestación de contenedores como Kubernetes, que pueden utilizar interfaces estándar sin la necesidad de saber los detalles de la implementación del sistema operativo y de las herramientas utilizadas.</p><p>Ambas herramientas eran parte de Docker, fueron extraídas y donadas a la <a href=https://www.cncf.io/>CNCF (Cloud Native Computing Foundation)</a>.</p><h2 id=runc>runc<a hidden class=anchor aria-hidden=true href=#runc>#</a></h2><p>Es una herramienta de línea de comandos escrita en Go que solo puede ejecutarse en Linux. Permite ejecutar aplicaciones contenerizadas siguiendo el estándar definido por la <a href=https://opencontainers.org/>Open Container Initiative (OCI)</a>.</p><p>Aunque proporciona un mayor nivel de abstracción respecto a los comandos del kernel, sigue siendo una utilidad de bajo nivel y normalmente es utilizada por herramientas de más alto nivel.</p><p>El estándar definido para la ejecución de contenedores se basa en el concepto de <a href=https://github.com/opencontainers/runtime-spec/blob/main/bundle.md><code>bundle</code></a>, que consiste en un directorio que contiene un archivo <code>config.json</code> y un directorio <code>rootfs (root filesystem)</code> con el sistema de archivos del contenedor.</p><p>El archivo <code>config.json</code> define cómo debe ejecutarse el contenedor. Algunos parámetros que proporciona son los siguientes:</p><ul><li><strong>process</strong>: Define qué comando ejecutar, el usuario, las variables de entorno y las capacidades.</li><li><strong>root</strong>: Especifica la ruta al sistema de archivos raíz.</li><li><strong>mounts</strong>: Lista los puntos de montaje necesarios.</li><li><strong>linux.namespaces</strong>: Configura el aislamiento mediante namespaces.</li><li><strong>linux.resources</strong>: Establece límites de recursos.</li></ul><p>Esta estructura JSON permite que herramientas de alto nivel generen configuraciones complejas.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;ociVersion&#34;</span>: <span style=color:#e6db74>&#34;1.2.1&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;process&#34;</span>: {
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;terminal&#34;</span>: <span style=color:#66d9ef>true</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;user&#34;</span>: {
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;uid&#34;</span>: <span style=color:#ae81ff>0</span>,
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;gid&#34;</span>: <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;args&#34;</span>: [<span style=color:#e6db74>&#34;sh&#34;</span>],
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;env&#34;</span>: [
</span></span><span style=display:flex><span>      <span style=color:#e6db74>&#34;PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#e6db74>&#34;TERM=xterm&#34;</span>
</span></span><span style=display:flex><span>    ],
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;cwd&#34;</span>: <span style=color:#e6db74>&#34;/&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;capabilities&#34;</span>: {
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;bounding&#34;</span>: [<span style=color:#e6db74>&#34;CAP_AUDIT_WRITE&#34;</span>, <span style=color:#e6db74>&#34;CAP_KILL&#34;</span>, <span style=color:#e6db74>&#34;CAP_NET_BIND_SERVICE&#34;</span>],
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;effective&#34;</span>: [<span style=color:#e6db74>&#34;CAP_AUDIT_WRITE&#34;</span>, <span style=color:#e6db74>&#34;CAP_KILL&#34;</span>, <span style=color:#e6db74>&#34;CAP_NET_BIND_SERVICE&#34;</span>],
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;permitted&#34;</span>: [<span style=color:#e6db74>&#34;CAP_AUDIT_WRITE&#34;</span>, <span style=color:#e6db74>&#34;CAP_KILL&#34;</span>, <span style=color:#e6db74>&#34;CAP_NET_BIND_SERVICE&#34;</span>]
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;rlimits&#34;</span>: [
</span></span><span style=display:flex><span>      {
</span></span><span style=display:flex><span>        <span style=color:#f92672>&#34;type&#34;</span>: <span style=color:#e6db74>&#34;RLIMIT_NOFILE&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#f92672>&#34;hard&#34;</span>: <span style=color:#ae81ff>1024</span>,
</span></span><span style=display:flex><span>        <span style=color:#f92672>&#34;soft&#34;</span>: <span style=color:#ae81ff>1024</span>
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    ],
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;noNewPrivileges&#34;</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;root&#34;</span>: {
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;path&#34;</span>: <span style=color:#e6db74>&#34;rootfs&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;readonly&#34;</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;hostname&#34;</span>: <span style=color:#e6db74>&#34;runc&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;mounts&#34;</span>: [
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;destination&#34;</span>: <span style=color:#e6db74>&#34;/proc&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;type&#34;</span>: <span style=color:#e6db74>&#34;proc&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;source&#34;</span>: <span style=color:#e6db74>&#34;proc&#34;</span>
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;destination&#34;</span>: <span style=color:#e6db74>&#34;/dev&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;type&#34;</span>: <span style=color:#e6db74>&#34;tmpfs&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;source&#34;</span>: <span style=color:#e6db74>&#34;tmpfs&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;options&#34;</span>: [<span style=color:#e6db74>&#34;nosuid&#34;</span>, <span style=color:#e6db74>&#34;strictatime&#34;</span>, <span style=color:#e6db74>&#34;mode=755&#34;</span>, <span style=color:#e6db74>&#34;size=65536k&#34;</span>]
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;destination&#34;</span>: <span style=color:#e6db74>&#34;/dev/pts&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;type&#34;</span>: <span style=color:#e6db74>&#34;devpts&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;source&#34;</span>: <span style=color:#e6db74>&#34;devpts&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;options&#34;</span>: [
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;nosuid&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;noexec&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;newinstance&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;ptmxmode=0666&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;mode=0620&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;gid=5&#34;</span>
</span></span><span style=display:flex><span>      ]
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;destination&#34;</span>: <span style=color:#e6db74>&#34;/dev/shm&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;type&#34;</span>: <span style=color:#e6db74>&#34;tmpfs&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;source&#34;</span>: <span style=color:#e6db74>&#34;shm&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;options&#34;</span>: [<span style=color:#e6db74>&#34;nosuid&#34;</span>, <span style=color:#e6db74>&#34;noexec&#34;</span>, <span style=color:#e6db74>&#34;nodev&#34;</span>, <span style=color:#e6db74>&#34;mode=1777&#34;</span>, <span style=color:#e6db74>&#34;size=65536k&#34;</span>]
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;destination&#34;</span>: <span style=color:#e6db74>&#34;/dev/mqueue&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;type&#34;</span>: <span style=color:#e6db74>&#34;mqueue&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;source&#34;</span>: <span style=color:#e6db74>&#34;mqueue&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;options&#34;</span>: [<span style=color:#e6db74>&#34;nosuid&#34;</span>, <span style=color:#e6db74>&#34;noexec&#34;</span>, <span style=color:#e6db74>&#34;nodev&#34;</span>]
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;destination&#34;</span>: <span style=color:#e6db74>&#34;/sys&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;type&#34;</span>: <span style=color:#e6db74>&#34;sysfs&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;source&#34;</span>: <span style=color:#e6db74>&#34;sysfs&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;options&#34;</span>: [<span style=color:#e6db74>&#34;nosuid&#34;</span>, <span style=color:#e6db74>&#34;noexec&#34;</span>, <span style=color:#e6db74>&#34;nodev&#34;</span>, <span style=color:#e6db74>&#34;ro&#34;</span>]
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;destination&#34;</span>: <span style=color:#e6db74>&#34;/sys/fs/cgroup&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;type&#34;</span>: <span style=color:#e6db74>&#34;cgroup&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;source&#34;</span>: <span style=color:#e6db74>&#34;cgroup&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;options&#34;</span>: [<span style=color:#e6db74>&#34;nosuid&#34;</span>, <span style=color:#e6db74>&#34;noexec&#34;</span>, <span style=color:#e6db74>&#34;nodev&#34;</span>, <span style=color:#e6db74>&#34;relatime&#34;</span>, <span style=color:#e6db74>&#34;ro&#34;</span>]
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  ],
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;linux&#34;</span>: {
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;resources&#34;</span>: {
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;devices&#34;</span>: [
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>          <span style=color:#f92672>&#34;allow&#34;</span>: <span style=color:#66d9ef>false</span>,
</span></span><span style=display:flex><span>          <span style=color:#f92672>&#34;access&#34;</span>: <span style=color:#e6db74>&#34;rwm&#34;</span>
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>      ]
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;namespaces&#34;</span>: [
</span></span><span style=display:flex><span>      {
</span></span><span style=display:flex><span>        <span style=color:#f92672>&#34;type&#34;</span>: <span style=color:#e6db74>&#34;pid&#34;</span>
</span></span><span style=display:flex><span>      },
</span></span><span style=display:flex><span>      {
</span></span><span style=display:flex><span>        <span style=color:#f92672>&#34;type&#34;</span>: <span style=color:#e6db74>&#34;network&#34;</span>
</span></span><span style=display:flex><span>      },
</span></span><span style=display:flex><span>      {
</span></span><span style=display:flex><span>        <span style=color:#f92672>&#34;type&#34;</span>: <span style=color:#e6db74>&#34;ipc&#34;</span>
</span></span><span style=display:flex><span>      },
</span></span><span style=display:flex><span>      {
</span></span><span style=display:flex><span>        <span style=color:#f92672>&#34;type&#34;</span>: <span style=color:#e6db74>&#34;uts&#34;</span>
</span></span><span style=display:flex><span>      },
</span></span><span style=display:flex><span>      {
</span></span><span style=display:flex><span>        <span style=color:#f92672>&#34;type&#34;</span>: <span style=color:#e6db74>&#34;mount&#34;</span>
</span></span><span style=display:flex><span>      },
</span></span><span style=display:flex><span>      {
</span></span><span style=display:flex><span>        <span style=color:#f92672>&#34;type&#34;</span>: <span style=color:#e6db74>&#34;cgroup&#34;</span>
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    ],
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;maskedPaths&#34;</span>: [
</span></span><span style=display:flex><span>      <span style=color:#e6db74>&#34;/proc/acpi&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#e6db74>&#34;/proc/asound&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#e6db74>&#34;/proc/kcore&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#e6db74>&#34;/proc/keys&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#e6db74>&#34;/proc/latency_stats&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#e6db74>&#34;/proc/timer_list&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#e6db74>&#34;/proc/timer_stats&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#e6db74>&#34;/proc/sched_debug&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#e6db74>&#34;/sys/firmware&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#e6db74>&#34;/proc/scsi&#34;</span>
</span></span><span style=display:flex><span>    ],
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;readonlyPaths&#34;</span>: [
</span></span><span style=display:flex><span>      <span style=color:#e6db74>&#34;/proc/bus&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#e6db74>&#34;/proc/fs&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#e6db74>&#34;/proc/irq&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#e6db74>&#34;/proc/sys&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#e6db74>&#34;/proc/sysrq-trigger&#34;</span>
</span></span><span style=display:flex><span>    ]
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Algunos de los comandos que define el estándar <a href=https://opencontainers.org/>OCI</a> y que <code>runc</code> implementa son:</p><ul><li><code>events</code>: muestra eventos del contenedor como notificaciones OOM, estadísticas de uso de CPU, memoria e IO.</li><li><code>create</code>: ejecuta el proceso definido por el usuario en un contenedor creado.</li><li><code>delete</code>: elimina los recursos asociados al contenedor, utilizado frecuentemente con contenedores en modo desacoplado.</li><li><code>kill</code>: envía la señal especificada (por defecto: SIGTERM) al proceso principal del contenedor.</li><li><code>start</code>: inicia el proceso principal.</li><li><code>state</code>: obtiene el estado actual de un contenedor.</li></ul><p><code>rootfs (root filesystem)</code> es el sistema de archivos raíz del contenedor. Contiene todos los archivos, librerías y herramientas para que el contenedor pueda ejecutarse.</p><p>Una estructura típica del sistema de archivos sería:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>rootfs/
</span></span><span style=display:flex><span>├── bin/           	<span style=color:#75715e># Binarios esenciales (sh, ls, cat, etc.)</span>
</span></span><span style=display:flex><span>├── boot/          	<span style=color:#75715e># Archivos de arranque (generalmente vacío)</span>
</span></span><span style=display:flex><span>├── dev/           	<span style=color:#75715e># Dispositivos (se monta dinámicamente)</span>
</span></span><span style=display:flex><span>├── etc/           	<span style=color:#75715e># Configuraciones del sistema</span>
</span></span><span style=display:flex><span>│   ├── passwd     	<span style=color:#75715e># Usuarios del contenedor</span>
</span></span><span style=display:flex><span>│   ├── group      	<span style=color:#75715e># Grupos del contenedor</span>
</span></span><span style=display:flex><span>│   ├── hosts      	<span style=color:#75715e># Resolución local de nombres</span>
</span></span><span style=display:flex><span>│   └── resolv.conf <span style=color:#75715e># Configuración DNS</span>
</span></span><span style=display:flex><span>├── home/          	<span style=color:#75715e># Directorios de usuarios</span>
</span></span><span style=display:flex><span>├── lib/           	<span style=color:#75715e># Bibliotecas compartidas esenciales</span>
</span></span><span style=display:flex><span>├── lib64/         	<span style=color:#75715e># Bibliotecas de 64 bits</span>
</span></span><span style=display:flex><span>├── media/         	<span style=color:#75715e># Puntos de montaje para medios removibles</span>
</span></span><span style=display:flex><span>├── mnt/           	<span style=color:#75715e># Puntos de montaje temporales</span>
</span></span><span style=display:flex><span>├── opt/           	<span style=color:#75715e># Paquetes de software opcionales</span>
</span></span><span style=display:flex><span>├── proc/          	<span style=color:#75715e># Sistema de archivos virtual (se monta dinámicamente)</span>
</span></span><span style=display:flex><span>├── root/          	<span style=color:#75715e># Directorio home del usuario root</span>
</span></span><span style=display:flex><span>├── run/           	<span style=color:#75715e># Datos de runtime</span>
</span></span><span style=display:flex><span>├── sbin/          	<span style=color:#75715e># Binarios del sistema</span>
</span></span><span style=display:flex><span>├── srv/           	<span style=color:#75715e># Datos de servicios</span>
</span></span><span style=display:flex><span>├── sys/           	<span style=color:#75715e># Sistema de archivos virtual (se monta dinámicamente)</span>
</span></span><span style=display:flex><span>├── tmp/           	<span style=color:#75715e># Archivos temporales</span>
</span></span><span style=display:flex><span>├── usr/           	<span style=color:#75715e># Programas y datos de usuario</span>
</span></span><span style=display:flex><span>│   ├── bin/       	<span style=color:#75715e># Binarios de usuario</span>
</span></span><span style=display:flex><span>│   ├── lib/       	<span style=color:#75715e># Bibliotecas</span>
</span></span><span style=display:flex><span>│   ├── local/     	<span style=color:#75715e># Software local</span>
</span></span><span style=display:flex><span>│   └── share/     	<span style=color:#75715e># Datos compartidos</span>
</span></span><span style=display:flex><span>└── var/           	<span style=color:#75715e># Datos variables</span>
</span></span><span style=display:flex><span>    ├── log/      	<span style=color:#75715e># Logs del sistema</span>
</span></span><span style=display:flex><span>    ├── cache/    	<span style=color:#75715e># Cache de aplicaciones</span>
</span></span><span style=display:flex><span>    └── tmp/      	<span style=color:#75715e># Archivos temporales adicionales</span>
</span></span></code></pre></div><p>Sistema de archivos de la imagen Alpine:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>rootfs/
</span></span><span style=display:flex><span>├── bin -&gt; /usr/bin
</span></span><span style=display:flex><span>├── etc/
</span></span><span style=display:flex><span>│   ├── alpine-release
</span></span><span style=display:flex><span>│   ├── passwd
</span></span><span style=display:flex><span>│   └── group
</span></span><span style=display:flex><span>├── lib -&gt; /usr/lib
</span></span><span style=display:flex><span>├── sbin -&gt; /usr/sbin
</span></span><span style=display:flex><span>├── usr/
</span></span><span style=display:flex><span>│   ├── bin/
</span></span><span style=display:flex><span>│   │   ├── sh -&gt; /bin/busybox
</span></span><span style=display:flex><span>│   │   ├── ls -&gt; /bin/busybox
</span></span><span style=display:flex><span>│   │   └── cat -&gt; /bin/busybox
</span></span><span style=display:flex><span>│   └── lib/
</span></span><span style=display:flex><span>│       └── libc.musl-x86_64.so.1
</span></span><span style=display:flex><span>└── var/
</span></span></code></pre></div><p>Sistema de archivos de la imagen Ubuntu:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>rootfs/
</span></span><span style=display:flex><span>├── bin/
</span></span><span style=display:flex><span>│   ├── bash
</span></span><span style=display:flex><span>│   ├── sh -&gt; dash
</span></span><span style=display:flex><span>│   └── ls
</span></span><span style=display:flex><span>├── usr/
</span></span><span style=display:flex><span>│   ├── bin/
</span></span><span style=display:flex><span>│   │   ├── python3
</span></span><span style=display:flex><span>│   │   └── apt
</span></span><span style=display:flex><span>│   └── lib/
</span></span><span style=display:flex><span>│       └── x86_64-linux-gnu/
</span></span><span style=display:flex><span>└── lib/
</span></span><span style=display:flex><span>    └── x86_64-linux-gnu/
</span></span><span style=display:flex><span>        ├── libc.so.6
</span></span><span style=display:flex><span>        └── libdl.so.2
</span></span></code></pre></div><h2 id=containerd>containerd<a hidden class=anchor aria-hidden=true href=#containerd>#</a></h2><p>Es un servicio que gestiona el ciclo de vida de los contenedores, implementando los estándares definidos por la <a href=https://opencontainers.org/>OCI</a>.</p><p>Actúa como la capa de abstracción entre los orquestadores de contenedores, como Kubernetes, y los runtimes de bajo nivel, como <code>runc</code>.</p><p>Las funcionalidades principales de <code>containerd</code> son:</p><ul><li><strong>Image service</strong>: Gestiona la descarga, almacenamiento y distribución de imágenes.<ul><li>Pull/Push: Descarga y subida de imágenes desde/hacia registries</li><li>Gestión de capas: Manejo eficiente de layers con deduplicación</li><li>Verificación de la integridad de las capas.</li><li>Recolección de basura (garbage collection).</li></ul></li><li><strong>Runtime service</strong>: Gestiona la ejecución de contenedores.</li><li><strong>Snapshot service</strong>: Gestiona los sistemas de archivos (filesystem) de los contenedores.</li></ul><p>Podemos interactuar con el servicio utilizando diferentes herramientas:</p><ul><li><a href=https://containerd.io/docs/getting-started/cli/><code>ctr</code></a>: Cliente oficial de bajo nivel para containerd. Permite gestionar imágenes, snapshots y contenedores, principalmente para tareas administrativas y de depuración.</li><li><a href=https://github.com/containerd/nerdctl><code>nerdctl</code></a>: Interfaz de línea de comandos compatible con Docker, diseñada para usuarios que buscan una experiencia similar a Docker pero utilizando containerd como backend.</li><li><a href=https://github.com/kubernetes/cri-tools><code>crictl</code></a>: Herramienta de línea de comandos para interactuar con runtimes compatibles con el estándar CRI (Container Runtime Interface), utilizada principalmente en entornos Kubernetes para inspeccionar y gestionar contenedores.</li></ul><p>La configuración del servicio <code>containerd</code> se realiza a través del archivo <code>/etc/containerd/config.toml</code>. Este archivo permite ajustar parámetros clave del servicio, como rutas de almacenamiento, plugins habilitados, configuración de red (CNI), integración con runtimes como <code>runc</code>, y opciones de seguridad.</p><p>Un ejemplo de configuración podría ser:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-toml data-lang=toml><span style=display:flex><span><span style=color:#a6e22e>version</span> = <span style=color:#ae81ff>3</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>root</span> = <span style=color:#e6db74>&#39;/var/lib/containerd&#39;</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>state</span> = <span style=color:#e6db74>&#39;/run/containerd&#39;</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>temp</span> = <span style=color:#e6db74>&#39;&#39;</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>disabled_plugins</span> = []
</span></span><span style=display:flex><span><span style=color:#a6e22e>required_plugins</span> = []
</span></span><span style=display:flex><span><span style=color:#a6e22e>oom_score</span> = <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>imports</span> = []
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>[<span style=color:#a6e22e>grpc</span>]
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>address</span> = <span style=color:#e6db74>&#39;/run/containerd/containerd.sock&#39;</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>tcp_address</span> = <span style=color:#e6db74>&#39;&#39;</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>tcp_tls_ca</span> = <span style=color:#e6db74>&#39;&#39;</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>tcp_tls_cert</span> = <span style=color:#e6db74>&#39;&#39;</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>tcp_tls_key</span> = <span style=color:#e6db74>&#39;&#39;</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>uid</span> = <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>gid</span> = <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>max_recv_message_size</span> = <span style=color:#ae81ff>16777216</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>max_send_message_size</span> = <span style=color:#ae81ff>16777216</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>[<span style=color:#a6e22e>ttrpc</span>]
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>address</span> = <span style=color:#e6db74>&#39;&#39;</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>uid</span> = <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>gid</span> = <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>[<span style=color:#a6e22e>debug</span>]
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>address</span> = <span style=color:#e6db74>&#39;&#39;</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>uid</span> = <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>gid</span> = <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>level</span> = <span style=color:#e6db74>&#39;&#39;</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>format</span> = <span style=color:#e6db74>&#39;&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>[<span style=color:#a6e22e>metrics</span>]
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>address</span> = <span style=color:#e6db74>&#39;&#39;</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>grpc_histogram</span> = <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>[<span style=color:#a6e22e>plugins</span>]
</span></span><span style=display:flex><span>  [<span style=color:#a6e22e>plugins</span>.<span style=color:#e6db74>&#39;io.containerd.cri.v1.images&#39;</span>]
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>snapshotter</span> = <span style=color:#e6db74>&#39;overlayfs&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>disable_snapshot_annotations</span> = <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>discard_unpacked_layers</span> = <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>max_concurrent_downloads</span> = <span style=color:#ae81ff>3</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>concurrent_layer_fetch_buffer</span> = <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>image_pull_progress_timeout</span> = <span style=color:#e6db74>&#39;5m0s&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>image_pull_with_sync_fs</span> = <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>stats_collect_period</span> = <span style=color:#ae81ff>10</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>use_local_image_pull</span> = <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    [<span style=color:#a6e22e>plugins</span>.<span style=color:#e6db74>&#39;io.containerd.cri.v1.images&#39;</span>.<span style=color:#a6e22e>pinned_images</span>]
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>sandbox</span> = <span style=color:#e6db74>&#39;registry.k8s.io/pause:3.10&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    [<span style=color:#a6e22e>plugins</span>.<span style=color:#e6db74>&#39;io.containerd.cri.v1.images&#39;</span>.<span style=color:#a6e22e>registry</span>]
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>config_path</span> = <span style=color:#e6db74>&#39;&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    [<span style=color:#a6e22e>plugins</span>.<span style=color:#e6db74>&#39;io.containerd.cri.v1.images&#39;</span>.<span style=color:#a6e22e>image_decryption</span>]
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>key_model</span> = <span style=color:#e6db74>&#39;node&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  [<span style=color:#a6e22e>plugins</span>.<span style=color:#e6db74>&#39;io.containerd.cri.v1.runtime&#39;</span>]
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>enable_selinux</span> = <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>selinux_category_range</span> = <span style=color:#ae81ff>1024</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>max_container_log_line_size</span> = <span style=color:#ae81ff>16384</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>disable_apparmor</span> = <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>restrict_oom_score_adj</span> = <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>disable_proc_mount</span> = <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>unset_seccomp_profile</span> = <span style=color:#e6db74>&#39;&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>tolerate_missing_hugetlb_controller</span> = <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>disable_hugetlb_controller</span> = <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>device_ownership_from_security_context</span> = <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ignore_image_defined_volumes</span> = <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>netns_mounts_under_state_dir</span> = <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>enable_unprivileged_ports</span> = <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>enable_unprivileged_icmp</span> = <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>enable_cdi</span> = <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>cdi_spec_dirs</span> = [<span style=color:#e6db74>&#39;/etc/cdi&#39;</span>, <span style=color:#e6db74>&#39;/var/run/cdi&#39;</span>]
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>drain_exec_sync_io_timeout</span> = <span style=color:#e6db74>&#39;0s&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ignore_deprecation_warnings</span> = []
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    [<span style=color:#a6e22e>plugins</span>.<span style=color:#e6db74>&#39;io.containerd.cri.v1.runtime&#39;</span>.<span style=color:#a6e22e>containerd</span>]
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>default_runtime_name</span> = <span style=color:#e6db74>&#39;runc&#39;</span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>ignore_blockio_not_enabled_errors</span> = <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>ignore_rdt_not_enabled_errors</span> = <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      [<span style=color:#a6e22e>plugins</span>.<span style=color:#e6db74>&#39;io.containerd.cri.v1.runtime&#39;</span>.<span style=color:#a6e22e>containerd</span>.<span style=color:#a6e22e>runtimes</span>]
</span></span><span style=display:flex><span>        [<span style=color:#a6e22e>plugins</span>.<span style=color:#e6db74>&#39;io.containerd.cri.v1.runtime&#39;</span>.<span style=color:#a6e22e>containerd</span>.<span style=color:#a6e22e>runtimes</span>.<span style=color:#a6e22e>runc</span>]
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>runtime_type</span> = <span style=color:#e6db74>&#39;io.containerd.runc.v2&#39;</span>
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>runtime_path</span> = <span style=color:#e6db74>&#39;&#39;</span>
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>pod_annotations</span> = []
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>container_annotations</span> = []
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>privileged_without_host_devices</span> = <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>privileged_without_host_devices_all_devices_allowed</span> = <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>cgroup_writable</span> = <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>base_runtime_spec</span> = <span style=color:#e6db74>&#39;&#39;</span>
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>cni_conf_dir</span> = <span style=color:#e6db74>&#39;&#39;</span>
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>cni_max_conf_num</span> = <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>snapshotter</span> = <span style=color:#e6db74>&#39;&#39;</span>
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>sandboxer</span> = <span style=color:#e6db74>&#39;podsandbox&#39;</span>
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>io_type</span> = <span style=color:#e6db74>&#39;&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>          [<span style=color:#a6e22e>plugins</span>.<span style=color:#e6db74>&#39;io.containerd.cri.v1.runtime&#39;</span>.<span style=color:#a6e22e>containerd</span>.<span style=color:#a6e22e>runtimes</span>.<span style=color:#a6e22e>runc</span>.<span style=color:#a6e22e>options</span>]
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>BinaryName</span> = <span style=color:#e6db74>&#39;&#39;</span>
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>CriuImagePath</span> = <span style=color:#e6db74>&#39;&#39;</span>
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>CriuWorkPath</span> = <span style=color:#e6db74>&#39;&#39;</span>
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>IoGid</span> = <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>IoUid</span> = <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>NoNewKeyring</span> = <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>Root</span> = <span style=color:#e6db74>&#39;&#39;</span>
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>ShimCgroup</span> = <span style=color:#e6db74>&#39;&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    [<span style=color:#a6e22e>plugins</span>.<span style=color:#e6db74>&#39;io.containerd.cri.v1.runtime&#39;</span>.<span style=color:#a6e22e>cni</span>]
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>bin_dir</span> = <span style=color:#e6db74>&#39;&#39;</span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>bin_dirs</span> = [<span style=color:#e6db74>&#39;/opt/cni/bin&#39;</span>]
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>conf_dir</span> = <span style=color:#e6db74>&#39;/etc/cni/net.d&#39;</span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>max_conf_num</span> = <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>setup_serially</span> = <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>conf_template</span> = <span style=color:#e6db74>&#39;&#39;</span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>ip_pref</span> = <span style=color:#e6db74>&#39;&#39;</span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>use_internal_loopback</span> = <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  [<span style=color:#a6e22e>plugins</span>.<span style=color:#e6db74>&#39;io.containerd.differ.v1.erofs&#39;</span>]
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>mkfs_options</span> = []
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  [<span style=color:#a6e22e>plugins</span>.<span style=color:#e6db74>&#39;io.containerd.gc.v1.scheduler&#39;</span>]
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>pause_threshold</span> = <span style=color:#ae81ff>0.02</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>deletion_threshold</span> = <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>mutation_threshold</span> = <span style=color:#ae81ff>100</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>schedule_delay</span> = <span style=color:#e6db74>&#39;0s&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>startup_delay</span> = <span style=color:#e6db74>&#39;100ms&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  [<span style=color:#a6e22e>plugins</span>.<span style=color:#e6db74>&#39;io.containerd.grpc.v1.cri&#39;</span>]
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>disable_tcp_service</span> = <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>stream_server_address</span> = <span style=color:#e6db74>&#39;127.0.0.1&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>stream_server_port</span> = <span style=color:#e6db74>&#39;0&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>stream_idle_timeout</span> = <span style=color:#e6db74>&#39;4h0m0s&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>enable_tls_streaming</span> = <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    [<span style=color:#a6e22e>plugins</span>.<span style=color:#e6db74>&#39;io.containerd.grpc.v1.cri&#39;</span>.<span style=color:#a6e22e>x509_key_pair_streaming</span>]
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>tls_cert_file</span> = <span style=color:#e6db74>&#39;&#39;</span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>tls_key_file</span> = <span style=color:#e6db74>&#39;&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  [<span style=color:#a6e22e>plugins</span>.<span style=color:#e6db74>&#39;io.containerd.image-verifier.v1.bindir&#39;</span>]
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>bin_dir</span> = <span style=color:#e6db74>&#39;/opt/containerd/image-verifier/bin&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>max_verifiers</span> = <span style=color:#ae81ff>10</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>per_verifier_timeout</span> = <span style=color:#e6db74>&#39;10s&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  [<span style=color:#a6e22e>plugins</span>.<span style=color:#e6db74>&#39;io.containerd.internal.v1.opt&#39;</span>]
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>path</span> = <span style=color:#e6db74>&#39;/opt/containerd&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  [<span style=color:#a6e22e>plugins</span>.<span style=color:#e6db74>&#39;io.containerd.internal.v1.tracing&#39;</span>]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  [<span style=color:#a6e22e>plugins</span>.<span style=color:#e6db74>&#39;io.containerd.metadata.v1.bolt&#39;</span>]
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>content_sharing_policy</span> = <span style=color:#e6db74>&#39;shared&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>no_sync</span> = <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  [<span style=color:#a6e22e>plugins</span>.<span style=color:#e6db74>&#39;io.containerd.monitor.container.v1.restart&#39;</span>]
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>interval</span> = <span style=color:#e6db74>&#39;10s&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  [<span style=color:#a6e22e>plugins</span>.<span style=color:#e6db74>&#39;io.containerd.monitor.task.v1.cgroups&#39;</span>]
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>no_prometheus</span> = <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  [<span style=color:#a6e22e>plugins</span>.<span style=color:#e6db74>&#39;io.containerd.nri.v1.nri&#39;</span>]
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>disable</span> = <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>socket_path</span> = <span style=color:#e6db74>&#39;/var/run/nri/nri.sock&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>plugin_path</span> = <span style=color:#e6db74>&#39;/opt/nri/plugins&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>plugin_config_path</span> = <span style=color:#e6db74>&#39;/etc/nri/conf.d&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>plugin_registration_timeout</span> = <span style=color:#e6db74>&#39;5s&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>plugin_request_timeout</span> = <span style=color:#e6db74>&#39;2s&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>disable_connections</span> = <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  [<span style=color:#a6e22e>plugins</span>.<span style=color:#e6db74>&#39;io.containerd.runtime.v2.task&#39;</span>]
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>platforms</span> = [<span style=color:#e6db74>&#39;linux/arm64/v8&#39;</span>]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  [<span style=color:#a6e22e>plugins</span>.<span style=color:#e6db74>&#39;io.containerd.service.v1.diff-service&#39;</span>]
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>default</span> = [<span style=color:#e6db74>&#39;walking&#39;</span>]
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>sync_fs</span> = <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  [<span style=color:#a6e22e>plugins</span>.<span style=color:#e6db74>&#39;io.containerd.service.v1.tasks-service&#39;</span>]
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>blockio_config_file</span> = <span style=color:#e6db74>&#39;&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>rdt_config_file</span> = <span style=color:#e6db74>&#39;&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  [<span style=color:#a6e22e>plugins</span>.<span style=color:#e6db74>&#39;io.containerd.shim.v1.manager&#39;</span>]
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>env</span> = []
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  [<span style=color:#a6e22e>plugins</span>.<span style=color:#e6db74>&#39;io.containerd.snapshotter.v1.blockfile&#39;</span>]
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>root_path</span> = <span style=color:#e6db74>&#39;&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>scratch_file</span> = <span style=color:#e6db74>&#39;&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>fs_type</span> = <span style=color:#e6db74>&#39;&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>mount_options</span> = []
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>recreate_scratch</span> = <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  [<span style=color:#a6e22e>plugins</span>.<span style=color:#e6db74>&#39;io.containerd.snapshotter.v1.devmapper&#39;</span>]
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>root_path</span> = <span style=color:#e6db74>&#39;&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>pool_name</span> = <span style=color:#e6db74>&#39;&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>base_image_size</span> = <span style=color:#e6db74>&#39;&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>async_remove</span> = <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>discard_blocks</span> = <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>fs_type</span> = <span style=color:#e6db74>&#39;&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>fs_options</span> = <span style=color:#e6db74>&#39;&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  [<span style=color:#a6e22e>plugins</span>.<span style=color:#e6db74>&#39;io.containerd.snapshotter.v1.erofs&#39;</span>]
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>root_path</span> = <span style=color:#e6db74>&#39;&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ovl_mount_options</span> = []
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>enable_fsverity</span> = <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  [<span style=color:#a6e22e>plugins</span>.<span style=color:#e6db74>&#39;io.containerd.snapshotter.v1.native&#39;</span>]
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>root_path</span> = <span style=color:#e6db74>&#39;&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  [<span style=color:#a6e22e>plugins</span>.<span style=color:#e6db74>&#39;io.containerd.snapshotter.v1.overlayfs&#39;</span>]
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>root_path</span> = <span style=color:#e6db74>&#39;&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>upperdir_label</span> = <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>sync_remove</span> = <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>slow_chown</span> = <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>mount_options</span> = []
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  [<span style=color:#a6e22e>plugins</span>.<span style=color:#e6db74>&#39;io.containerd.snapshotter.v1.zfs&#39;</span>]
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>root_path</span> = <span style=color:#e6db74>&#39;&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  [<span style=color:#a6e22e>plugins</span>.<span style=color:#e6db74>&#39;io.containerd.tracing.processor.v1.otlp&#39;</span>]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  [<span style=color:#a6e22e>plugins</span>.<span style=color:#e6db74>&#39;io.containerd.transfer.v1.local&#39;</span>]
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>max_concurrent_downloads</span> = <span style=color:#ae81ff>3</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>concurrent_layer_fetch_buffer</span> = <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>max_concurrent_uploaded_layers</span> = <span style=color:#ae81ff>3</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>check_platform_supported</span> = <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>config_path</span> = <span style=color:#e6db74>&#39;&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>[<span style=color:#a6e22e>cgroup</span>]
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>path</span> = <span style=color:#e6db74>&#39;&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>[<span style=color:#a6e22e>timeouts</span>]
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#39;io.containerd.timeout.bolt.open&#39;</span> = <span style=color:#e6db74>&#39;0s&#39;</span>
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#39;io.containerd.timeout.cri.defercleanup&#39;</span> = <span style=color:#e6db74>&#39;1m0s&#39;</span>
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#39;io.containerd.timeout.metrics.shimstats&#39;</span> = <span style=color:#e6db74>&#39;2s&#39;</span>
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#39;io.containerd.timeout.shim.cleanup&#39;</span> = <span style=color:#e6db74>&#39;5s&#39;</span>
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#39;io.containerd.timeout.shim.load&#39;</span> = <span style=color:#e6db74>&#39;5s&#39;</span>
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#39;io.containerd.timeout.shim.shutdown&#39;</span> = <span style=color:#e6db74>&#39;3s&#39;</span>
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#39;io.containerd.timeout.task.state&#39;</span> = <span style=color:#e6db74>&#39;2s&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>[<span style=color:#a6e22e>stream_processors</span>]
</span></span><span style=display:flex><span>  [<span style=color:#a6e22e>stream_processors</span>.<span style=color:#e6db74>&#39;io.containerd.ocicrypt.decoder.v1.tar&#39;</span>]
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>accepts</span> = [<span style=color:#e6db74>&#39;application/vnd.oci.image.layer.v1.tar+encrypted&#39;</span>]
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>returns</span> = <span style=color:#e6db74>&#39;application/vnd.oci.image.layer.v1.tar&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>path</span> = <span style=color:#e6db74>&#39;ctd-decoder&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>args</span> = [<span style=color:#e6db74>&#39;--decryption-keys-path&#39;</span>, <span style=color:#e6db74>&#39;/etc/containerd/ocicrypt/keys&#39;</span>]
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>env</span> = [<span style=color:#e6db74>&#39;OCICRYPT_KEYPROVIDER_CONFIG=/etc/containerd/ocicrypt/ocicrypt_keyprovider.conf&#39;</span>]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  [<span style=color:#a6e22e>stream_processors</span>.<span style=color:#e6db74>&#39;io.containerd.ocicrypt.decoder.v1.tar.gzip&#39;</span>]
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>accepts</span> = [<span style=color:#e6db74>&#39;application/vnd.oci.image.layer.v1.tar+gzip+encrypted&#39;</span>]
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>returns</span> = <span style=color:#e6db74>&#39;application/vnd.oci.image.layer.v1.tar+gzip&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>path</span> = <span style=color:#e6db74>&#39;ctd-decoder&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>args</span> = [<span style=color:#e6db74>&#39;--decryption-keys-path&#39;</span>, <span style=color:#e6db74>&#39;/etc/containerd/ocicrypt/keys&#39;</span>]
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>env</span> = [<span style=color:#e6db74>&#39;OCICRYPT_KEYPROVIDER_CONFIG=/etc/containerd/ocicrypt/ocicrypt_keyprovider.conf&#39;</span>]
</span></span></code></pre></div><p>En configuraciones avanzadas, se pueden definir múltiples runtimes, ajustar el driver de almacenamiento (por ejemplo, <code>overlayfs</code>), configurar la comunicación por sockets, y personalizar la integración con Kubernetes mediante CRI.</p><p>Algunos puntos destacados de la configuración:</p><ul><li><strong>General</strong>: Define rutas de datos (<code>root</code>, <code>state</code>), plugins habilitados y parámetros globales.</li><li><strong>Comunicación y APIs</strong>: Configura los sockets para gRPC y ttrpc, utilizados para la comunicación entre procesos y con los <a href=/posts/2025/k8s/contenedores-desde-el-kernel-hasta-la-orquestacion-parte-2-runc-containerd/#containerd-shim>shims</a>.</li><li><strong>CRI (Container Runtime Interface)</strong>: Permite la integración con Kubernetes, especificando imágenes sandbox, runtimes por defecto y opciones de red.</li><li><strong>Gestión de imágenes</strong>: Selección del snapshotter (por ejemplo, <code>overlayfs</code>), deduplicación de capas y políticas de recolección de basura.</li><li><strong>Red (CNI)</strong>: Define rutas y parámetros para la configuración de red de los contenedores.</li><li><strong>Runtimes</strong>: Permite definir y personalizar diferentes runtimes (como <code>runc</code>), así como sus opciones específicas.</li></ul><p>La flexibilidad de este archivo permite adaptar <code>containerd</code> a distintos entornos y necesidades, desde laboratorios hasta despliegues en producción con Kubernetes.</p><p>Además de <code>containerd</code>, existen otras alternativas para la ejecución de contenedores:</p><ul><li><a href=https://cri-o.io/>CRI-O</a>: Un runtime ligero diseñado específicamente para Kubernetes. Implementa la especificación <a href=https://kubernetes.io/docs/concepts/architecture/cri/>Container Runtime Interface (CRI)</a> y utiliza <code>runc</code> como runtime de bajo nivel.</li><li><a href=https://docs.docker.com/engine/>Docker Engine</a>: Plataforma ampliamente utilizada para construir, enviar y ejecutar contenedores. Ofrece gestión de imágenes, redes y volúmenes, y emplea internamente <code>containerd</code> y <code>runc</code>.</li><li><a href=https://www.mirantis.com/software/mirantis-container-runtime/>Mirantis Container Runtime</a>: Solución empresarial previamente conocida como Docker Engine - Enterprise, certificada para entornos de producción y con características avanzadas de seguridad y soporte extendido.</li></ul><h3 id=containerd-shim>containerd-shim<a hidden class=anchor aria-hidden=true href=#containerd-shim>#</a></h3><p>Para garantizar que los contenedores sigan funcionando incluso si el proceso principal de <code>containerd</code> se reinicia o actualiza, existe un componente intermedio llamado <strong>containerd-shim</strong>.</p><p>Este shim se sitúa entre <code>containerd</code> y el runtime de bajo nivel (<code>runc</code>), y cumple varias funciones clave para ofrecer la gran resiliencia del sistema:</p><ul><li>Permite que los contenedores continúen ejecutándose de forma independiente al proceso principal de <code>containerd</code>.</li><li>Gestiona la entrada y salida estándar (stdin, stdout, stderr) de los procesos dentro del contenedor.</li><li>Se encarga de recolectar procesos huérfanos (zombies) para evitar fugas de recursos.</li><li>Propaga señales del sistema operativo (como SIGTERM o SIGKILL) al proceso principal del contenedor.</li></ul><p>De este modo, cada contenedor tiene su propio proceso shim, lo que mejora la resiliencia y el aislamiento de los contenedores gestionados por <code>containerd</code>.</p><p><img alt="Diagrama Kubernetes, containerd, containerd-shim, namespaces, cgroups" loading=lazy src=/2025/k8s/containers-diagram-containerd-shim.png></p><h2 id=ejemplo-práctico>Ejemplo práctico<a hidden class=anchor aria-hidden=true href=#ejemplo-práctico>#</a></h2><p>Vamos a comprobar la evolución desde comandos del Kernel de Linux hasta las herramientas de alto nivel <code>runc</code> y <code>containerd</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo unshare --pid --mount --uts --fork /bin/bash
</span></span><span style=display:flex><span>mount -t proc proc /proc
</span></span><span style=display:flex><span>hostname manual-container
</span></span><span style=display:flex><span>ps aux
</span></span></code></pre></div><ol><li>El comando <code>unshare</code> permite crear nuevos namespaces en Linux, proporcionando una shell de <code>bash</code> que se ejecuta de forma aislada, puntos de montaje y hostname, aunque sigue teniendo acceso al sistema de archivos y procesos del host:<ul><li><code>--pid</code>: crea un nuevo namespace de PID, donde los procesos tienen su propio espacio de identificadores, comenzando desde 1.</li><li><code>--mount</code>: aísla las operaciones de montaje, de modo que los cambios no afectan al host.</li><li><code>--uts</code>: crea un namespace UTS, permitiendo modificar el hostname y domainname solo dentro del namespace.</li><li><code>--fork</code>: ejecuta el proceso <code>/bin/bash</code> como hijo, haciendo que este sea el proceso principal del nuevo namespace.</li></ul></li><li>El comando <code>mount -t proc proc /proc</code> monta un sistema de archivos virtual <code>proc</code> en el nuevo namespace, mostrando solo los procesos del namespace.</li><li>El comando <code>hostname manual-container</code> cambia el nombre del host dentro del namespace UTS recién creado, sin afectar al sistema principal.</li></ol><p><img alt="Resultado ejecución comandos" loading=lazy src=/2025/k8s/containers-demo-unshare-result.png></p><p>Vamos a utilizar el comando <code>runc</code> para obtener el mismo resultado:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>CONTAINER_NAME<span style=color:#f92672>=</span>manual-container
</span></span><span style=display:flex><span>mkdir $CONTAINER_NAME
</span></span><span style=display:flex><span>cd $CONTAINER_NAME
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>sudo ctr image pull docker.io/library/alpine:3.22.0
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>mkdir rootfs
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>sudo ctr image mount docker.io/library/alpine:3.22.0 rootfs
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>runc spec
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>echo <span style=color:#66d9ef>$(</span>
</span></span><span style=display:flex><span>  jq <span style=color:#e6db74>&#39;.process.args = [&#34;/bin/sh&#34;, &#34;-c&#34;, &#34;uname -a &amp;&amp; ps aux &amp;&amp; sleep 30&#34;]&#39;</span> config.json
</span></span><span style=display:flex><span><span style=color:#66d9ef>)</span> &gt; config.json
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>sudo runc run $CONTAINER_NAME
</span></span></code></pre></div><ol><li>Creamos un directorio para alojar el sistema de archivos <code>rootfs</code> y la configuración del contenedor (<code>config.json</code>).</li><li>Descargamos una imagen (por ejemplo, Alpine) para obtener el sistema de archivos base (<code>rootfs</code>).</li><li>Generamos el archivo de configuración <code>config.json</code> con el comando <code>runc spec</code>.</li><li>Modificamos el comando de inicio del contenedor para que ejecute <code>uname -a && ps aux && sleep 30</code>.</li><li>Iniciamos el contenedor con <code>sudo runc run $CONTAINER_NAME</code>.</li></ol><p><img alt="Resultado ejecución comandos runc" loading=lazy src=/2025/k8s/containers-runc-demo-result.png></p><p>Ejecutamos el contenedor utilizando <code>containerd</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo ctr images pull docker.io/library/alpine:3.22.0
</span></span><span style=display:flex><span>sudo ctr run --rm docker.io/library/alpine:3.22.0 manual-container /bin/sh -c <span style=color:#e6db74>&#34;uname -a &amp;&amp; ps aux &amp;&amp; sleep 30&#34;</span>
</span></span></code></pre></div><p><img alt="Resultado ejecución comandos containerd" loading=lazy src=/2025/k8s/containers-containerd-demo-result.png></p><h2 id=conclusión>Conclusión<a hidden class=anchor aria-hidden=true href=#conclusión>#</a></h2><p>La orquestación y ejecución de contenedores no es una tarea trivial. Los <code>namespaces</code> y <code>cgroups</code> del kernel de Linux proporcionan el aislamiento y control de recursos a bajo nivel. Sobre estos cimientos, herramientas como <code>runc</code> y <code>containerd</code> añaden una capa de abstracción que facilita la gestión, mejora la experiencia de usuario y habilita funcionalidades avanzadas como la recolección de métricas.</p><p>Gracias a la estandarización impulsada por la comunidad y organizaciones como la OCI y la CNCF, hoy disponemos de un ecosistema diverso de herramientas (como gVisor, Kata Containers o CRI-O) que permiten adaptar la ejecución de contenedores a diferentes necesidades y escenarios, desde laboratorios hasta entornos de producción y orquestación con Kubernetes.</p><p>Con estas bases sólidas, estamos preparados para el siguiente paso: <strong>Kubernetes</strong>.</p><h2 id=referencias>Referencias<a hidden class=anchor aria-hidden=true href=#referencias>#</a></h2><ul><li><a href=https://containerd.io/>https://containerd.io/</a></li><li><a href=https://github.com/containerd/containerd/blob/main/docs/PLUGINS.md>https://github.com/containerd/containerd/blob/main/docs/PLUGINS.md</a></li><li><a href=https://github.com/opencontainers/containerd>https://github.com/opencontainers/containerd</a></li><li><a href=https://github.com/opencontainers/runc>https://github.com/opencontainers/runc</a></li><li><a href=https://iximiuz.com/en/posts/you-dont-need-an-image-to-run-a-container/>https://iximiuz.com/en/posts/you-dont-need-an-image-to-run-a-container/</a></li><li><a href=https://kubernetes.io/docs/setup/production-environment/container-runtimes/>https://kubernetes.io/docs/setup/production-environment/container-runtimes/</a></li></ul></div><footer class=post-footer><ul class=post-tags><li><a href=https://blog.javivela.dev/tags/containers/>Containers</a></li><li><a href=https://blog.javivela.dev/tags/kubernetes/>Kubernetes</a></li><li><a href=https://blog.javivela.dev/tags/k8s/>K8S</a></li><li><a href=https://blog.javivela.dev/tags/linux/>Linux</a></li></ul><nav class=paginav><a class=next href=https://blog.javivela.dev/posts/2025/k8s/contenedores-desde-el-kernel-hasta-la-orquestacion-parte-1-cgroups-namespaces/><span class=title>Siguiente »</span><br><span>Contenedores: Desde el kernel hasta la orquestación - namespaces y control groups (cgroups)</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share Contenedores: Desde el kernel hasta la orquestación - runc y containerd on x" href="https://x.com/intent/tweet/?text=Contenedores%3a%20Desde%20el%20kernel%20hasta%20la%20orquestaci%c3%b3n%20-%20runc%20y%20containerd&amp;url=https%3a%2f%2fblog.javivela.dev%2fposts%2f2025%2fk8s%2fcontenedores-desde-el-kernel-hasta-la-orquestacion-parte-2-runc-containerd%2f&amp;hashtags=containers%2ckubernetes%2cK8S%2clinux"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Contenedores: Desde el kernel hasta la orquestación - runc y containerd on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fblog.javivela.dev%2fposts%2f2025%2fk8s%2fcontenedores-desde-el-kernel-hasta-la-orquestacion-parte-2-runc-containerd%2f&amp;title=Contenedores%3a%20Desde%20el%20kernel%20hasta%20la%20orquestaci%c3%b3n%20-%20runc%20y%20containerd&amp;summary=Contenedores%3a%20Desde%20el%20kernel%20hasta%20la%20orquestaci%c3%b3n%20-%20runc%20y%20containerd&amp;source=https%3a%2f%2fblog.javivela.dev%2fposts%2f2025%2fk8s%2fcontenedores-desde-el-kernel-hasta-la-orquestacion-parte-2-runc-containerd%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Contenedores: Desde el kernel hasta la orquestación - runc y containerd on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fblog.javivela.dev%2fposts%2f2025%2fk8s%2fcontenedores-desde-el-kernel-hasta-la-orquestacion-parte-2-runc-containerd%2f&title=Contenedores%3a%20Desde%20el%20kernel%20hasta%20la%20orquestaci%c3%b3n%20-%20runc%20y%20containerd"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Contenedores: Desde el kernel hasta la orquestación - runc y containerd on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fblog.javivela.dev%2fposts%2f2025%2fk8s%2fcontenedores-desde-el-kernel-hasta-la-orquestacion-parte-2-runc-containerd%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Contenedores: Desde el kernel hasta la orquestación - runc y containerd on whatsapp" href="https://api.whatsapp.com/send?text=Contenedores%3a%20Desde%20el%20kernel%20hasta%20la%20orquestaci%c3%b3n%20-%20runc%20y%20containerd%20-%20https%3a%2f%2fblog.javivela.dev%2fposts%2f2025%2fk8s%2fcontenedores-desde-el-kernel-hasta-la-orquestacion-parte-2-runc-containerd%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Contenedores: Desde el kernel hasta la orquestación - runc y containerd on telegram" href="https://telegram.me/share/url?text=Contenedores%3a%20Desde%20el%20kernel%20hasta%20la%20orquestaci%c3%b3n%20-%20runc%20y%20containerd&amp;url=https%3a%2f%2fblog.javivela.dev%2fposts%2f2025%2fk8s%2fcontenedores-desde-el-kernel-hasta-la-orquestacion-parte-2-runc-containerd%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentColor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Contenedores: Desde el kernel hasta la orquestación - runc y containerd on ycombinator" href="https://news.ycombinator.com/submitlink?t=Contenedores%3a%20Desde%20el%20kernel%20hasta%20la%20orquestaci%c3%b3n%20-%20runc%20y%20containerd&u=https%3a%2f%2fblog.javivela.dev%2fposts%2f2025%2fk8s%2fcontenedores-desde-el-kernel-hasta-la-orquestacion-parte-2-runc-containerd%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://blog.javivela.dev/>Javi Vela Blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a> &
<a href=https://librecounter.org/ rel=noopener target=_blank>LibreCounter</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><img src=https://librecounter.org/counter.svg referrerpolicy=unsafe-url width=0 alt=LibreCounter>
<script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copiar";function s(){t.innerHTML="¡copiado!",setTimeout(()=>{t.innerHTML="copiar"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>